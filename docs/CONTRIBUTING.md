# Chat2Dashboard å¼€å‘æŒ‡å—

> æœ¬æŒ‡å—ä¸º GitHub åä½œå¼€å‘è€…æä¾›å¿«é€Ÿä¸Šæ‰‹å’Œè´¡çŒ®ä»£ç çš„è¯¦ç»†æŒ‡å¼•

## ğŸ“‹ ç›®å½•
- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [å¼€å‘ç¯å¢ƒè®¾ç½®](#å¼€å‘ç¯å¢ƒè®¾ç½®)
- [é¡¹ç›®æ¶æ„](#é¡¹ç›®æ¶æ„)
- [å¼€å‘å·¥ä½œæµ](#å¼€å‘å·¥ä½œæµ)
- [ä»£ç è§„èŒƒ](#ä»£ç è§„èŒƒ)
- [æµ‹è¯•æŒ‡å—](#æµ‹è¯•æŒ‡å—)
- [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

Chat2Dashboard æ˜¯ä¸€ä¸ªåŸºäº AI çš„æ•°æ®å¯è§†åŒ–å¹³å°ï¼Œæ—¨åœ¨é€šè¿‡è‡ªç„¶è¯­è¨€ä¸æ•°æ®è¿›è¡Œäº¤äº’ï¼Œè‡ªåŠ¨ç”Ÿæˆå¯è§†åŒ–å›¾è¡¨ã€‚é¡¹ç›®é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼š

- **åç«¯**: FastAPI + Vanna + OpenAIï¼Œæä¾› AI é©±åŠ¨çš„ SQL ç”Ÿæˆå’Œæ•°æ®æŸ¥è¯¢
- **å‰ç«¯**: React + Viteï¼Œæä¾›ç°ä»£åŒ–çš„ç”¨æˆ·ç•Œé¢

### æ ¸å¿ƒç‰¹æ€§
- ğŸ¤– AI é©±åŠ¨çš„è‡ªç„¶è¯­è¨€åˆ° SQL è½¬æ¢
- ğŸ“Š å¤šç§å›¾è¡¨ç±»å‹æ”¯æŒ (ECharts)
- ğŸ“ æ–‡ä»¶ä¸Šä¼ å’Œæ•°æ®åº“ç®¡ç†
- ğŸ§  æ™ºèƒ½è®­ç»ƒæ•°æ®ç®¡ç†
- ğŸ“ è¯·æ±‚æ—¥å¿—å’Œç³»ç»Ÿç›‘æ§

## ğŸ›  å¼€å‘ç¯å¢ƒè®¾ç½®

### å‰ç½®è¦æ±‚
- **Python**: 3.11+
- **Node.js**: 18+
- **uv**: Python åŒ…ç®¡ç†å™¨ ([å®‰è£…æŒ‡å—](https://docs.astral.sh/uv/getting-started/installation/))
- **OpenAI API Key**: æˆ–å…¼å®¹çš„ API æœåŠ¡

### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/your-org/chat2dashboard.git
cd chat2dashboard
```

### 2. åç«¯è®¾ç½®
```bash
cd backend

# å®‰è£…ä¾èµ–
uv sync

# åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œæ·»åŠ ä½ çš„ OpenAI API Key
```

**ç¯å¢ƒå˜é‡é…ç½®** (`.env`):
```env
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_API_BASE=https://api.openai.com/v1  # å¯é€‰ï¼Œè‡ªå®šä¹‰ API åŸºåœ°å€
```

### 3. å‰ç«¯è®¾ç½®
```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# æˆ–ä½¿ç”¨ yarn
yarn install
```

### 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

**åç«¯æœåŠ¡å™¨**:
```bash
cd backend
uv run python main.py
```
- API æœåŠ¡: http://localhost:8000
- Web ç•Œé¢: http://localhost:8000

**å‰ç«¯å¼€å‘æœåŠ¡å™¨**:
```bash
cd frontend
npm run dev
```
- å‰ç«¯ç•Œé¢: http://localhost:5173

## ğŸ— é¡¹ç›®æ¶æ„

### åç«¯æ¶æ„ (`backend/`)
```
backend/
â”œâ”€â”€ app/                    # ä¸»åº”ç”¨ç›®å½•
â”‚   â”œâ”€â”€ main.py            # FastAPI åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ config.py          # åº”ç”¨é…ç½®
â”‚   â”œâ”€â”€ api/v1/            # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ database.py    # æ•°æ®åº“ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ visualization.py # å›¾è¡¨ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ schema.py      # æ¨¡å¼ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ logs.py        # æ—¥å¿—ç®¡ç†
â”‚   â”‚   â””â”€â”€ system.py      # ç³»ç»ŸçŠ¶æ€
â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ agent.py       # DBAgent (Vanna é›†æˆ)
â”‚   â”‚   â”œâ”€â”€ sql_generator.py # AI SQL ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ database.py    # æ•°æ®åº“å·¥å…·
â”‚   â”‚   â””â”€â”€ html_generator/ # å›¾è¡¨ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ models/            # Pydantic æ¨¡å‹
â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
â”œâ”€â”€ databases/             # SQLite æ•°æ®åº“å­˜å‚¨
â”œâ”€â”€ logs/                  # æ—¥å¿—æ–‡ä»¶
â””â”€â”€ templates/             # HTML æ¨¡æ¿
```

### å‰ç«¯æ¶æ„ (`frontend/`)
```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/        # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ pages/            # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ context/          # React Context
â”‚   â””â”€â”€ assets/           # é™æ€èµ„æº
â”œâ”€â”€ public/               # å…¬å…±èµ„æº
â””â”€â”€ examples/             # å›¾è¡¨ç¤ºä¾‹
```

### å…³é”®æŠ€æœ¯æ ˆ

**åç«¯**:
- **FastAPI**: Web æ¡†æ¶
- **Vanna**: AI SQL ç”Ÿæˆæ¡†æ¶
- **OpenAI**: å¤§è¯­è¨€æ¨¡å‹ API
- **ChromaDB**: å‘é‡æ•°æ®åº“
- **SQLite**: æ•°æ®å­˜å‚¨
- **Pandas**: æ•°æ®å¤„ç†

**å‰ç«¯**:
- **React**: UI æ¡†æ¶
- **Vite**: æ„å»ºå·¥å…·
- **ECharts**: å›¾è¡¨åº“

## ğŸ”„ å¼€å‘å·¥ä½œæµ

### 1. åˆ†æ”¯ç­–ç•¥
- `main`: ä¸»åˆ†æ”¯ï¼Œç”Ÿäº§ç¯å¢ƒä»£ç 
- `develop`: å¼€å‘åˆ†æ”¯ï¼Œé›†æˆæœ€æ–°åŠŸèƒ½
- `feature/*`: åŠŸèƒ½åˆ†æ”¯
- `bugfix/*`: ä¿®å¤åˆ†æ”¯

### 2. å¼€å‘æµç¨‹
1. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯**:
   ```bash
   git checkout -b feature/your-feature-name
   ```

2. **å¼€å‘å’Œæµ‹è¯•**:
   ```bash
   # åç«¯æµ‹è¯•
   cd backend
   uv run python -m pytest
   
   # å‰ç«¯æµ‹è¯•
   cd frontend
   npm test
   ```

3. **æäº¤ä»£ç **:
   ```bash
   git add .
   git commit -m "feat: add your feature description"
   ```

4. **æ¨é€å’Œåˆ›å»º PR**:
   ```bash
   git push origin feature/your-feature-name
   # åœ¨ GitHub ä¸Šåˆ›å»º Pull Request
   ```

### 3. æäº¤ä¿¡æ¯è§„èŒƒ
ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒ:

```
<type>(<scope>): <description>

[optional body]
```

**ç±»å‹**:
- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤ bug
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼è°ƒæ•´
- `refactor`: é‡æ„
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»º/å·¥å…·ç›¸å…³

**ç¤ºä¾‹**:
```
feat(backend): add SQL generation caching
fix(frontend): resolve chart rendering issue
docs: update API documentation
```

## ğŸ“ ä»£ç è§„èŒƒ

### Python ä»£ç è§„èŒƒ
- éµå¾ª **PEP 8** æ ‡å‡†
- ä½¿ç”¨ **type hints**
- ç±»å’Œå‡½æ•°éœ€è¦ **docstring**
- æœ€å¤§è¡Œé•¿åº¦: **88 å­—ç¬¦**

**æ¨èå·¥å…·**:
```bash
# å®‰è£…å¼€å‘å·¥å…·
uv add --dev black ruff pytest

# ä»£ç æ ¼å¼åŒ–
black app/
ruff check app/
```

### JavaScript/React è§„èŒƒ
- ä½¿ç”¨ **ES6+** è¯­æ³•
- ç»„ä»¶ä½¿ç”¨ **å‡½æ•°å¼ç»„ä»¶** + Hooks
- éµå¾ª **React æœ€ä½³å®è·µ**
- ä½¿ç”¨ **ESLint** æ£€æŸ¥

### API è®¾è®¡è§„èŒƒ
- éµå¾ª **RESTful** è®¾è®¡åŸåˆ™
- ä½¿ç”¨åˆé€‚çš„ **HTTP çŠ¶æ€ç **
- ç»Ÿä¸€çš„ **é”™è¯¯å“åº”æ ¼å¼**
- å®Œæ•´çš„ **API æ–‡æ¡£** (FastAPI è‡ªåŠ¨ç”Ÿæˆ)

## ğŸ§ª æµ‹è¯•æŒ‡å—

### åç«¯æµ‹è¯•
```bash
cd backend

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
uv run python -m pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
uv run python -m pytest tests/test_agent.py

# è¿è¡Œè¦†ç›–ç‡æµ‹è¯•
uv run python -m pytest --cov=app
```

### å‰ç«¯æµ‹è¯•
```bash
cd frontend

# è¿è¡Œå•å…ƒæµ‹è¯•
npm test

# è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
npm run test:e2e
```

### æµ‹è¯•æ•°æ®
é¡¹ç›®æä¾›ç¤ºä¾‹æ•°æ®åº“ï¼Œä½äº `backend/databases/fitbit/`ï¼ŒåŒ…å«å¥èº«æ•°æ®ç”¨äºå¼€å‘æµ‹è¯•ã€‚

## ğŸš€ éƒ¨ç½²æŒ‡å—

### å¼€å‘ç¯å¢ƒ
```bash
# åç«¯
cd backend && uv run python start.py

# å‰ç«¯
cd frontend && npm run dev
```

### ç”Ÿäº§ç¯å¢ƒ
```bash
# æ„å»ºå‰ç«¯
cd frontend && npm run build

# å¯åŠ¨åç«¯ (ç”Ÿäº§æ¨¡å¼)
cd backend && uv run uvicorn app.main:app --host 0.0.0.0 --port 8000
```

## â“ å¸¸è§é—®é¢˜

### Q: OpenAI API è°ƒç”¨å¤±è´¥ï¼Ÿ
**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹:
1. API Key æ˜¯å¦æ­£ç¡®è®¾ç½®
2. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
3. API é…é¢æ˜¯å¦å……è¶³
4. å¦‚ä½¿ç”¨ä»£ç† APIï¼Œæ£€æŸ¥ `OPENAI_API_BASE` é…ç½®

### Q: æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Ÿ
**A**: ç¡®è®¤:
1. æ•°æ®åº“æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®
2. æƒé™æ˜¯å¦è¶³å¤Ÿ
3. SQLite æ˜¯å¦æ­£ç¡®å®‰è£…

### Q: å‰ç«¯é¡µé¢ç©ºç™½ï¼Ÿ
**A**: æ£€æŸ¥:
1. åç«¯ API æ˜¯å¦æ­£å¸¸è¿è¡Œ
2. CORS é…ç½®æ˜¯å¦æ­£ç¡®
3. æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

### Q: å›¾è¡¨ä¸æ˜¾ç¤ºï¼Ÿ
**A**: å¯èƒ½åŸå› :
1. æ•°æ®æ ¼å¼ä¸æ­£ç¡®
2. ECharts åŠ è½½å¤±è´¥
3. å›¾è¡¨ç±»å‹ä¸æ”¯æŒ

## ğŸ¤ è´¡çŒ®æŒ‡å—

### å¦‚ä½•è´¡çŒ®
1. **Fork** é¡¹ç›®åˆ°ä½ çš„ GitHub è´¦å·
2. **Clone** åˆ°æœ¬åœ°å¼€å‘ç¯å¢ƒ
3. **åˆ›å»ºåˆ†æ”¯** å¼€å‘æ–°åŠŸèƒ½æˆ–ä¿®å¤ bug
4. **éµå¾ªä»£ç è§„èŒƒ** å’Œæµ‹è¯•è¦æ±‚
5. **æäº¤ PR** å¹¶æè¿°ä¿®æ”¹å†…å®¹
6. **ç­‰å¾… Code Review** å’Œåˆå¹¶

### PR æ£€æŸ¥æ¸…å•
- [ ] ä»£ç éµå¾ªé¡¹ç›®è§„èŒƒ
- [ ] æ·»åŠ äº†å¿…è¦çš„æµ‹è¯•
- [ ] æ›´æ–°äº†ç›¸å…³æ–‡æ¡£
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æäº¤ä¿¡æ¯ç¬¦åˆè§„èŒƒ

### ä»£ç å®¡æŸ¥æ ‡å‡†
- **åŠŸèƒ½å®Œæ•´æ€§**: æ˜¯å¦å®ç°äº†é¢„æœŸåŠŸèƒ½
- **ä»£ç è´¨é‡**: æ˜¯å¦éµå¾ªæœ€ä½³å®è·µ
- **æµ‹è¯•è¦†ç›–**: æ˜¯å¦æœ‰è¶³å¤Ÿçš„æµ‹è¯•
- **æ–‡æ¡£å®Œæ•´**: æ˜¯å¦æ›´æ–°äº†ç›¸å…³æ–‡æ¡£
- **å‘åå…¼å®¹**: æ˜¯å¦å½±å“ç°æœ‰åŠŸèƒ½

## ğŸ“ è·å–å¸®åŠ©

- **Issue æŠ¥å‘Š**: [GitHub Issues](https://github.com/JasonDZS/chat2dashboard/issues)
- **é¡¹ç›®æ–‡æ¡£**: æŸ¥çœ‹ `docs/` ç›®å½•ä¸‹çš„å…¶ä»–æ–‡æ¡£

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ï¼Œè¯¦è§ [LICENSE](../LICENSE) æ–‡ä»¶ã€‚

---

**Happy Coding! ğŸ‰**

æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿é€šè¿‡ Issue æˆ– Discussion ä¸æˆ‘ä»¬äº¤æµï¼